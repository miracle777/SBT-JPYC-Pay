# パソコンでのPWA利用について

## 🖥️ パソコンでのPWA利用は可能です

はい、パソコンでもPWA（Progressive Web App）として利用できますが、**ウォレット接続に制限**があります。

## 💾 ローカルストレージの共有について

### 🔍 重要なポイント

**ブラウザとPWAでのデータ共有は環境によって異なります：**

#### ✅ 通常は共有される（同一ドメイン）
```
同一ドメイン (例: https://yourapp.com)
├── 🌐 ブラウザ版
└── 📱 PWA版
    └── 共通ストレージ領域を使用
```

- **localStorage**: ウォレット設定、API設定
- **IndexedDB**: SBTテンプレート、画像、発行履歴

#### ⚠️ 分離される場合
以下の場合、データが分離される可能性があります：

- **異なるブラウザエンジン**: Chrome PWA vs Firefox ブラウザ
- **ポータブルブラウザ**: USBブラウザなど
- **プライベートモード**: シークレットウィンドウから
- **セキュリティ設定**: 企業セキュリティポリシー

### 🧪 自動チェック機能

アプリには**ストレージ互換性チェッカー**が内蔵されており：

- 現在の環境（PWA/ブラウザ）を検出
- localStorage と IndexedDB の動作確認
- データ共有状況の自動判定
- 必要に応じて対処法を提案

## ⚠️ 主な制限事項

### 1. MetaMask拡張機能へのアクセス不可
- PWAアプリは独立したコンテキストで実行されるため、ブラウザのMetaMask拡張機能に直接アクセスできません
- `window.ethereum`オブジェクトが利用できない状況が発生します

### 2. ウォレット残高表示不可
- ウォレット接続ができないため、以下の機能が制限されます：
  - POL残高の表示
  - ガス代の見積もり表示
  - ネットワーク状態の確認

### 3. SBT発行不可
- ブロックチェーンへの書き込み操作ができません
- IPFS画像アップロードも影響を受けます

## 🔧 推奨される使用方法

### ハイブリッド利用
1. **PWA版**: テンプレート管理、データエクスポート/インポート
2. **ブラウザ版**: ウォレット接続、SBT発行、残高確認

### 自動案内機能
- アプリがPWA環境を自動検出します
- ウォレット接続時に「ブラウザで開く」ボタンが表示されます
- ワンクリックで適切な環境に移動できます

## 🔄 データが分離されている場合の対処法

### 📤 データエクスポート/インポートで解決

データが分離されていても、以下の手順で同期できます：

#### ステップ1: データをエクスポート
```bash
1. データが保存されている方（ブラウザまたはPWA）でアプリを開く
2. 「SBT管理」→「データ管理」ボタンをクリック
3. 「データをエクスポート」を選択
4. JSONファイルをダウンロード
```

#### ステップ2: データをインポート
```bash
1. 移行先（PWAまたはブラウザ）でアプリを開く
2. 「SBT管理」→「データ管理」ボタンをクリック  
3. 「データをインポート」を選択
4. エクスポートしたJSONファイルを選択
5. 「データをインポート」で完了
```

### 🔧 自動チェックで状況確認

アプリの「設定」画面で **ストレージ互換性チェック** を実行すると：

- 現在の環境（PWA/ブラウザ）
- データの保存状況
- 共有されているかどうか

が自動で判定されます。

## 🏆 最適な利用戦略

### パターンA: データ共有される場合
```
✅ 推奨: 自由に切り替え
📱 PWA: 日常のテンプレート管理
🌐 ブラウザ: ウォレット接続・SBT発行
```

### パターンB: データ分離される場合  
```
📤 推奨: 主環境を決めて定期エクスポート
🏠 メイン環境: ブラウザ（全機能利用）
📱 サブ環境: PWA（必要時にインポート）
```

## 💡 実用的な活用方法

### 🏢 企業・店舗での運用
1. **管理者**: ブラウザでテンプレート作成・SBT発行
2. **スタッフ**: PWAで日常的なテンプレート管理  
3. **定期同期**: エクスポート/インポートでデータ統一

### 👤 個人での運用
1. **在宅**: ブラウザで全機能を活用
2. **外出**: PWAでオフライン閲覧・管理
3. **必要時**: エクスポート/インポートで同期

### テンプレート作成・管理（PWA推奨）
```
✅ PWAで利用可能:
- SBTテンプレートの作成・編集
- 画像のアップロード・管理
- データのエクスポート・インポート
- 統計・分析の表示
```

### SBT発行・ウォレット操作（ブラウザ推奨）
```
🌐 ブラウザ版が必要:
- MetaMaskとの接続
- ウォレット残高の確認
- SBTのブロックチェーン登録
- トランザクションの確認
```

## 🚀 将来の改善予定

### WalletConnect対応
- モバイルウォレットアプリとの連携を検討中
- PWAからでも外部ウォレットアプリに接続可能になる予定

### ディープリンク対応
- PWAからブラウザ版への遷移をより滑らかに

## 📱 他のプラットフォーム

### モバイル
- 同様の制限がありますが、将来のWalletConnect対応で改善予定

### タブレット
- パソコンと同様の動作

## 🏆 推奨運用方法

### 個人利用
1. PWAをインストール（テンプレート管理用）
2. ブラウザブックマーク保存（SBT発行用）
3. 用途に応じて使い分け

### 企業・店舗利用
1. サーバー環境での統一運用を推奨
2. 従業員にはブラウザ版の利用を案内
3. PWAは補助的な用途で活用

## 📞 サポート

問題や質問がございましたら、GitHubのIssuesでお気軽にお尋ねください。

---

*PWA環境の自動検出により、適切な使用方法を案内いたします。*